.TH CLEAN-REPO 1 "November 22, 2025" "clean-repo 1.3.0" "User Commands"

.SH NAME
clean-repo \- remove files ignored by Git

.SH SYNOPSIS
.B clean-repo
.RB [ \-x ]
.RB [ \-i " " PATTERN " ] ..."
.RB [ \-v ]
.RB [ \-q ]
.RB [ \-h " | " \-\-help ]
.RB [ \-\-version ]

.SH DESCRIPTION
.B clean-repo
lists (in dry-run mode) or deletes files that are ignored by Git. By default, it
only displays which files would be removed. Use the
.B \-x
option to permanently delete ignored files.

The command must be executed inside a Git working tree. It relies on Git's
built-in ignore mechanism, considering patterns from
.I .gitignore ,
.I .git/info/exclude ,
and global Git ignore rules. Tracked files are never removed.

.PP
This tool is primarily intended for cleaning temporary, build, or editor-generated
files that are intentionally ignored in the repository.

.SH OPTIONS
.TP
.B \-x
Execute deletion. Without this flag, the command performs a dry-run and shows
which files would be deleted.

.TP
.BR \-i " " PATTERN
Exclude files matching
.I PATTERN
from deletion. Can be specified multiple times. Patterns follow shell glob
syntax (e.g., "\fB*.log\fR", "\fBcache/*\fR").

.TP
.B \-v
Verbose mode. Display detailed debug information during execution.

.TP
.B \-q
Quiet mode. Suppress all informational messages; only errors are printed.

.TP
.BR \-h ", " \-\-help
Show usage information and exit.

.TP
.B \-\-version
Print version information and exit.

.SH EXIT STATUS
.TP
.B 0
The command completed successfully.
.TP
.B 1
Invalid arguments were supplied.
.TP
.B 2
No
.I .gitignore
file was found in the repository root.
.TP
.B 3
The command was run outside a Git repository.
.TP
.B 4
An operation failed (e.g., file deletion error).

.SH EXAMPLES
.PP
List ignored files that would be deleted:
.RS
.nf
clean-repo
.fi
.RE

.PP
Actually delete all ignored files:
.RS
.nf
clean-repo -x
.fi
.RE

.PP
Delete ignored files except log files and cache directory:
.RS
.nf
clean-repo -i "*.log" -i "cache/*" -x
.fi
.RE

.PP
Verbose dry-run:
.RS
.nf
clean-repo -v
.fi
.RE

.SH FILES
.TP
.I .gitignore
Repository ignore file that specifies patterns for ignored files. Must exist.

.TP
.I .git/info/exclude
Per-repository ignore patterns (considered by Git during listing).

.SH ENVIRONMENT
.TP
.B GIT_DIR
Specifies the Git repository directory. If set, the tool operates relative to
this directory.

.TP
.B GIT_WORK_TREE
Specifies the working tree path. If set, cleanup occurs within this tree.

.SH WARNINGS
Running
.B clean-repo
with the
.B \-x
flag permanently deletes files. Deleted files cannot be recovered. Always review
the dry-run output before performing destructive operations.

.SH NOTES
The command identifies ignored files using:
.PP
.RS
.nf
git ls-files -oi --exclude-standard
.fi
.RE
.PP
Directories are removed recursively using
.B rm -rf
when in execute mode.

.SH BUGS
No known bugs.

.SH AUTHOR
Written by Mohammad Saeed.

.SH REPORTING BUGS
Report bugs to:
<imsaeedsaeedi@gmail.com>

.SH COPYRIGHT
This is free software; you may modify and redistribute it under the terms of
your chosen license.

.SH SEE ALSO
.BR git (1),
.BR git-ls-files (1),
.BR gitignore (5),
.BR rm (1)
